parameters:
- name: Projects
  type: string
  default: ''
- name: NugetConfigPath
  type: string
  default: ''

steps:
# Install .NET SDK (necessario per Ubuntu 24.04)
- task: UseDotNet@2
  displayName: 'Install .NET 8 SDK'
  inputs:
    packageType: 'sdk'
    version: '8.0.x'
    performMultiLevelLookup: true

# Autenticazione per feed privati
- task: NuGetAuthenticate@1
  displayName: 'Autenticazione NuGet'

# Restore con .NET CLI
- task: DotNetCoreCLI@2
  displayName: 'Restore .NET'
  inputs:
    command: 'restore'
    projects: ${{ parameters.Projects }}
    feedsToUse: 'config'
    nugetConfigPath: ${{ parameters.NugetConfigPath }}
    verbosityRestore: 'Normal'
